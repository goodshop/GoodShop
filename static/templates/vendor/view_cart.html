{% extends 'customer/base.html' %}
{% block scripts %}<script src="/static/js/customer.js"></script>{% endblock %}
{% block title %}Shopping Cart{% endblock %}
{% block content %}
<div class="panel panel-info">
  <div class="panel-heading">
    <div class="row">
        <div class="col-xs-6">
            <h3 class="panel-title"
                style="margin-top: 7px;color: rgba(70, 10, 10, 0.7);font-weight: bold;">
                Shopping Cart
            </h3>
        </div>
        <div class="col-xs-6">
            <a href="{% url 'shopping_cart' %}clear/" class="btn btn-md btn-danger btn-qty align-right">
                Clear Cart
                <span class="glyphicon glyphicon-remove danger" style="color: white;font-size: smaller;"> </span>
            </a>
        </div>
    </div>
  </div>
  <div class="panel-body">
    <!--  Cart Items  -->
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th class="text-center">Product</th>
                    <th class="text-center">Price</th>
                    <th class="text-center">Quantity</th>
                    <th class="text-center">Sub-total</th>
                    <th class="text-center">Opciones</th>
                </tr>
            </thead>
            <tbody>
                {% for item in cart %}
                    <tr>
                        <!-- Product Info -->
                        <td>
                            <div class="row">
                              <div class="col-sm-4 col-sm-offset-1 cart-thumbnail thumbnail">
                                <!-- Position Helper -->
                                <div id="{{item.product.id}}" class="position-helper"></div>
                                {% if item.product.get_first_image %}
                                <img src="{{item.product.get_first_image}}" class="product-img" alt="{{item.product.name}}">
                                {% else %}
                                <img data-src="holder.js/100%x180" class="product-img" alt="{{item.product.name}}">
                                {% endif %}
                              </div>
                              <div class="col-sm-7">
                                <h4>{{item.product.name}}</h3>
                              </div>
                            </div>
                        </td>
                        <!-- Product Price -->
                        <td class="text-center">
                            <h4>${{item.product.price}}</h4>
                        </td>
                        <!--  Quantity -->
                        <td class="text-center">
                            <a href="{% url 'shopping_cart' %}add?sku={{item.product.id}}&qty=-1"
                            class="btn btn-sm btn-qty"
                            {% if item.quantity == 1 %}disabled="disabled"{% endif %} >
                                <span class="glyphicon glyphicon-minus btn-qty-icon"></span>
                            </a>
                            <input type="text"
                                   class="product-qty"
                                   value="{{item.quantity}}"
                                   size="3"
                                   data-min="1"
                                   data-max="999"
                                   data-id="{{item.product.id}}">
                            </input>
                            <a href="{% url 'shopping_cart' %}add?sku={{item.product.id}}&qty=1"
                            class="btn btn-sm btn-qty">
                                <span class="glyphicon glyphicon-plus btn-qty-icon"></span>
                            </a>
                        </td>
                        <!-- Sub-Total -->
                        <td class="text-center">
                            <h4 class="total-price">${{item.total}}</h4>
                        </td>
                        <!-- Remove item -->
                        <td class="text-center">
                            <a href="{% url 'shopping_cart' %}remove?sku={{item.product.id}}"
                            class="btn btn-sm btn-qty text-center">
                                <span class="glyphicon glyphicon-remove danger" style="color: red;"></span>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        {% if cart.is_empty %}
        <div class="alert alert-danger"><strong>Oh Snap!</strong> Your cart is empty.</div>
        {% endif %}
    </div> <!--Table Responsive-->
  </div> <!--Panel Body-->
</div> <!--Panel div-->

<!--Check Out Panel-->
{% if not cart.is_empty %}
<div class="well well-lg">
  <div class="row">
      <div class="col-sm-7">
      </div>
      <div class="col-sm-3">
          <h4 class="">Order Total: <span class="total-price">${{cart.total}}</span></h4>
      </div>
      <div class="col-sm-2">
          <a href="{% url 'cart_checkout' %}" class="btn btn-lg btn-success">
              <span class="glyphicon glyphicon-usd" style="font-size: smaller;"></span> Check Out
          </a>
      </div>
  </div>
</div>
{% endif %}   <!--Check Out Panel-->

{% endblock %}